网格确权管理平台需求说明文档
1. 文档概述
1.1 文档目的
本文档明确网格确权管理平台（以下简称“平台”）的核心定位、功能需求、非功能需求、数据需求、接口需求及约束条件，为平台开发、测试、验收提供依据，同时界定平台服务边界，保障开发与后续运营的合规性。
1.2 平台定位
平台核心定位为“以网格为管理核心的合规确权技术服务平台”，核心价值是为客户（个人/企业/机构/项目方）提供网格注册（个人可申请）、码体系接收前端传入数据并管理（网格码、双因子码、模态标识）、资源关联、溯源查询、数据统计等技术服务，支撑客户开展合法的网格确权管理工作。平台仅提供技术服务，不参与任何形式的“码交易”，不承担客户运营过程中的商业履约责任。
1.3 适用范围
本文档适用于平台开发团队、测试团队、项目管理团队及客户方对接人员，作为需求确认、开发落地、验收交付的核心依据。
1.4 术语与定义
术语	定义
网格	平台核心管理单元，可按“个人/企业/机构/项目”分类（无地域关联），具有明确边界与责任主体（个人或机构），是码体系与资源的归属容器；一个主体（个人/公司）可对应一个网格码，通过订购方式获取
网格码	网格的唯一数字标识，通过前端传入或外部平台迁移导入获取（无地域属性），用于网格身份识别与溯源，仅作为服务凭证；个人/公司均可通过订购方式获取对应主体的网格码，由前端将该网格码传入数据库
双因子码	网格下的二级标识，分为资产类（绑定子品牌/产品线）与个人类（绑定法人/员工/消费者），关联网格码使用
模态标识	双因子码下的末梢标识，分为商品类（绑定单实体商品，如单瓶酒）与交易类（绑定购买/转让行为），是确权的最小单元
服务订阅	客户获取平台服务的方式，通过支付技术服务费（注册费/订阅费/增值费）享受对应功能权限，非“码交易”
2. 核心角色与权限需求
2.1 角色分类
平台核心角色分为4类，权限严格隔离，确保操作合规与数据安全：
角色名称	核心职责	核心权限
系统管理员	平台全局配置、角色权限管理、合规审计、系统维护、迁移数据校验	1. 配置码迁移规则、前端传入数据校验规则、网格分类规则；2. 管理所有角色权限；3. 查看全量审计日志；4. 系统参数配置与维护；5. 审核迁移码数据及前端传入码数据的有效性
网格管理员（客户方）	所属网格的基础管理、码体系迁移/模拟导入、资源关联、数据查看	1. 新增/编辑所属网格基础信息（个人网格仅可编辑联系方式等非核心信息）；2. 导入迁移的网格码、双因子码，或接收前端传入的对应码标识并提交审核；3. 审核网格内资源流转（如双因子码转移）；4. 查看所属网格的统计数据
客户操作员（客户方）	协助网格管理员完成日常操作，无审批权限	1. 录入网格内资源基础信息；2. 接收前端传入的模态标识并提交校验，或导入迁移的模态标识；3. 查看所属网格的基础数据；4. 提交资源流转申请
普通用户（消费者/个人网格申请人）	扫码溯源、查看个人关联的确权信息、申请个人网格及相关码标识	1. 扫码查询商品类模态标识对应的网格/子品牌/归属信息（脱敏）；2. 查看个人双因子码下的交易类模态标识记录；3. 提交个人网格申请及相关资质材料；4. 管理个人网格的基础信息
2.2 权限约束
1. 数据隔离：网格管理员/操作员仅能查看、操作所属网格的相关数据，无法跨网格访问；2. 审批流程：网格内资源流转（如双因子码跨网格转移）需经系统管理员审核；3. 日志留存：所有角色的操作均生成审计日志，不可删除、篡改。
3. 核心功能需求
平台功能围绕“网格管理”核心，分为7大模块，所有功能均服务于“技术服务”定位，规避任何“码交易”相关设计：
3.1 网格管理模块
核心目标：实现网格的全生命周期管理，建立清晰的网格层级与归属关系
3.1.1 网格基础信息管理
支持新增网格（即网格码订购）：申请人可选择个人或公司（企业/机构）名义订购，录入网格名称、主体类型（个人/公司）、上级网格（可选，支持多级嵌套，与地域无关）、业务边界（描述网格覆盖的业务范围，无地域限制）、生效时间、责任主体信息（公司：名称、法人信息、资质文件；个人：姓名、身份证信息、联系方式），提交后需系统管理员审核激活，审核通过即完成订购，获取对应网格码
•支持编辑网格：仅可编辑名称、覆盖范围、责任主体联系方式等非核心信息，网格类型、上级网格变更需系统管理员审核
•支持网格状态管控：状态分为“未激活/已激活/暂停/注销”，暂停/注销需提交原因（如资质到期、项目终止），注销后网格下所有码体系失效，数据归档留存
资质审核功能：企业/机构提交的资质文件（营业执照、非遗认证等）、个人提交的身份凭证（身份证正反面）支持OCR识别校验，系统管理员可查看审核记录并反馈结果，审核通过后方可激活网格
3.1.2 网格层级管理
支持配置网格层级规则（如“项目网格→公司网格→个人网格”等，无地域层级），限制层级嵌套深度（最多5级）
支持网格归属关系调整：跨层级转移网格需提交转移凭证（如合作协议、主体变更说明），经系统管理员审核通过后生效，记录调整历史（无地域相关转移场景）
•可视化展示：支持以树形结构展示全量网格层级关系，网格管理员仅能查看所属层级分支
3.2 码体系管理模块
核心目标：接收前端传入的网格码、双因子码、模态标识数据，完成数据校验与管理，保障码标识唯一、不可篡改，支撑网格与资源的关联溯源（正式环境同时支持外部平台迁移导入，后台仅负责数据接收、校验、存储与管理，不承担码生成职责）
3.2.1 码规则配置
系统管理员仅配置迁移导入规则：定义外部平台迁移码数据的格式规范（如字段映射、数据校验规则）、迁移来源标识（区分不同外部平台）；前端负责码的生成及前端传入数据的自身校验，相关规则配置与后台无关，后台不干预前端码生成及数据校验过程
仅支持迁移导入规则的版本管理：修改迁移导入规则后生成新版本，历史迁移的码标识仍按旧规则校验，新迁移的码按新规则执行；前端传入数据的规则版本由前端自主管理，与后台无关
数据校验仅针对迁移导入场景：系统自动校验迁移码标识的格式、唯一性、合法性，不符合规则的标识标记为“无效码”，拒绝导入并反馈错误原因（如“编码格式错误”“该码已存在”）；前端传入的码数据已由前端完成生成与校验，后台仅直接接收并存储管理，不额外进行校验
3.2.2 网格码管理
•网格审核激活后，支持两种网格码获取与管理方式：1. 迁移导入：网格管理员上传外部平台导出的网格码数据（需符合迁移导入规则），系统校验通过后完成绑定与存储；2. 前端传入：前端将客户订购的网格码传入系统，由网格管理员提交审核，系统按配置的校验规则完成校验，校验通过后绑定网格基础信息并存储；网格码绑定后，不可修改、不可删除
•网格码持有人绑定：企业/机构网格关联网格责任主体（如法人）信息，个人网格绑定申请人个人信息，记录持有人变更历史（需审核变更凭证）
•网格码验真功能：支持输入网格码查询对应网格信息（脱敏展示）、码来源（前端传入/迁移导入），验证标识真伪，记录验真日志
3.2.3 双因子码管理
•支持双因子码两种获取与管理方式：1. 迁移导入：网格管理员上传外部平台导出的双因子码数据（关联对应网格码），系统校验通过后完成绑定与存储；2. 前端传入：前端将双因子码数据传入系统，网格管理员选择所属网格、码类型（资产类/个人类）并提交审核，系统校验通过后绑定网格码并存储；支持批量/单个导入/接收
•双因子码绑定功能：资产类双因子码绑定子品牌/产品线信息（名称、品类、上线时间）；个人类双因子码绑定个人基础信息（姓名、手机号脱敏存储），个人网格申请人的双因子码默认关联其个人网格
•双因子码状态管控：状态分为“未激活/已激活/冻结/失效”，资产类双因子码冻结（如子品牌下架）需提交原因，个人类双因子码失效（如个人脱离网格）需验证身份；迁移导入/前端传入的双因子码状态同步初始传入状态
•双因子码转移：跨网格转移双因子码需提交转移凭证（如品牌授权协议、个人转让说明），经系统管理员审核通过后生效，记录转移日志
3.2.4 模态标识管理
•支持模态标识管理方式：前端将商品类模态标识数据传入系统，关联所属资产类双因子码并绑定单实体商品信息（生产批次、生产日期、质检信息），经系统校验通过后存储，可导出供印刷使用（如贴在酒瓶上）
•支持自动接收交易类模态标识：对接客户交易系统，交易完成后由前端将交易类模态标识数据传入系统，自动关联购买者个人双因子码及对应商品类模态标识，记录购买信息（时间、渠道、金额脱敏）
•模态标识状态管理：商品类状态（未出库/已出库/已销售/已退换/已报废）、交易类状态（已生成/已确认/已取消），状态变更由前端传入或后台操作触发，自动同步至审计日志
•模态标识溯源：支持正向（网格码→双因子码→模态标识）、反向（模态标识→双因子码→网格码）溯源查询，展示关联关系与基础信息
3.3 资源关联管理模块
核心目标：明确网格、码标识、实体资源（商品/个人/交易）的关联关系，确保溯源链路完整
•支持网格与双因子码的绑定/解绑：绑定后双因子码归属该网格，解绑仅支持网格注销/双因子码转移场景，需审核
•支持双因子码与模态标识的关联：商品类模态标识默认关联生成时选择的资产类双因子码，交易类模态标识默认关联购买者个人双因子码，不可手动修改
•支持资源信息补充关联：如商品类模态标识关联检测报告、非遗技艺介绍视频，交易类模态标识关联购买凭证（小票/发票扫描件），关联文件归档留存
•关联关系查询：支持按网格/双因子码/模态标识查询关联的所有资源信息，导出关联关系明细报表
3.4 溯源查询模块
核心目标：为不同角色提供合规的溯源查询服务，平衡信息透明与隐私保护
扫码溯源功能：普通用户扫码商品类模态标识，展示脱敏信息（商品名称、所属网格名称、子品牌、生产批次、当前归属人姓氏/公司简称+联系方式后4位），可选展示非遗介绍、质检报告摘要（无地域相关信息）
•后台溯源功能：网格管理员/系统管理员可查询全量溯源信息（含完整归属人信息、交易明细），支持按码标识/时间/网格筛选
•验真结果反馈：扫码查询时自动校验码标识真伪，反馈“正品”“伪码”“已失效”结果，伪码查询记录IP、设备信息，触发预警
•溯源记录留存：所有溯源查询行为（扫码人、时间、设备、查询结果）生成日志，留存至少3年，支持导出审计
3.5 数据统计与分析模块
核心目标：以网格为核心维度，提供数据统计与可视化展示，支撑客户运营决策
核心指标统计：网格维度（双因子码数量、模态标识生成量/确权率、资源流转次数）、码体系维度（码激活率、伪码率、状态分布）、时间维度（月度/季度生成量趋势）、主体类型维度（个人/公司网格的数量、活跃度对比）（无地域相关指标）
•报表生成：支持生成“网格资源汇总报表”“码体系运营报表”“溯源查询统计报表”，支持自定义筛选条件（时间、网格类型、区域），导出格式为Excel/PDF
可视化展示：支持以树形结构展示全量网格层级关系（按主体类型/业务关联展示，无地域维度），网格管理员仅能查看所属层级分支
•数据导出权限控制：全量数据导出仅系统管理员可操作，网格管理员仅能导出所属网格的非敏感数据
3.6 合规审计模块
核心目标：实现全操作链路审计，防范违法操作，保障平台合规运行
•审计日志记录：所有角色的操作（新增/编辑/删除/审核/查询）均生成日志，包含操作人、操作时间、操作内容、IP地址、设备信息，不可删除、篡改
•异常预警功能：系统管理员可配置预警规则（如单次生成超100个双因子码、伪码扫码量突增、跨区域频繁转移码标识），触发预警后推送通知，记录处理结果
•合规报表生成：自动生成“月度合规审计报表”，包含操作合规率、预警处理率、资质审核通过率等指标，支持提交监管部门备案
•数据归档：注销网格的所有数据、历史操作日志归档留存，留存期限不少于5年，支持按条件检索调阅
3.7 服务订阅与权限管控模块
核心目标：明确服务收费模式，按订阅等级管控功能权限，规避“码交易”风险
•服务套餐配置：系统管理员可配置多档服务套餐（基础版/企业版/旗舰版），明确各套餐包含的功能权限（如基础版仅支持1个网格管理，企业版支持10个网格）、收费标准（一次性注册费+年度订阅费）、服务期限
•订阅管理：客户可查看套餐详情、提交订阅申请、支付服务费用（对接第三方支付接口），支付完成后系统自动开通对应功能权限，记录订阅记录
•权限管控：按订阅套餐等级限制功能使用（如基础版不支持自定义码规则、不提供高级数据统计），套餐到期后自动冻结功能权限，仅保留数据查看权限
•合规告知：客户订阅时需阅读并确认《服务使用协议》《数据安全与隐私保护告知书》，明确“码标识仅为服务凭证，不可交易、转让”，留存确认记录
4. 非功能需求
4.1 性能需求
•并发量：支持至少1000个网格管理员同时在线操作，扫码溯源并发量支持500QPS（每秒查询次数）
•响应时间：单条数据查询/操作响应时间≤1秒，批量生成1000个模态标识响应时间≤10秒，报表生成响应时间≤30秒
•数据存储：支持至少100万条网格数据、1亿条码标识数据、10亿条操作日志的存储，存储系统支持扩容
4.2 安全需求
•数据加密：个人敏感信息（身份证号、手机号）脱敏存储（如手机号存储后4位，完整信息加密存储），码标识生成后同步至区块链存证，记录哈希值用于验真
•身份认证：支持多因素认证（账号密码+短信验证码/企业CA认证），连续5次登录失败锁定账号，需管理员解锁
•防攻击：具备防SQL注入、XSS跨站脚本、CSRF跨站请求伪造等攻击能力，定期进行安全渗透测试
•数据备份：核心数据（网格信息、码标识信息、审计日志）支持实时备份，备份数据存储在异地服务器，支持故障后1小时内恢复
4.3 兼容性需求
•浏览器兼容：支持Chrome（90+版本）、Firefox（88+版本）、Edge（90+版本）、Safari（14+版本）
•移动端兼容：扫码溯源功能支持iOS（13+版本）、Android（9+版本）的主流浏览器/微信扫码
•接口兼容：支持与主流区块链平台（如联盟链）、第三方支付系统、企业ERP系统的接口对接，接口协议支持HTTP/HTTPS、JSON格式
4.4 可扩展性需求
•架构可扩展：采用微服务架构，支持新增功能模块（如后续新增“侵权监测对接”模块）时不影响现有系统运行
•规则可配置：码生成规则、网格分类规则、预警规则、服务套餐规则均支持可视化配置，无需修改代码即可调整
•多语言支持：预留多语言扩展能力，后续可新增英文、日文等语言版本
5. 数据需求
5.1 核心数据实体
平台核心数据实体及核心字段如下：
数据实体	核心字段
网格信息	网格ID、网格名称、主体类型（个人/公司）、上级网格ID、业务边界、生效时间、状态、责任主体信息（公司：名称、法人信息、资质文件ID；个人：姓名、身份证号加密存储、联系方式）、创建时间（订购时间）、最后编辑时间
网格码信息	网格码值、网格ID、数据来源（前端传入/外部平台迁移）、校验规则版本/迁移规则版本、哈希值、持有人ID、传入/迁移时间、状态、存证记录ID
双因子码信息	双因子码值、网格ID、码类型、关联资源ID（子品牌/个人）、数据来源（前端传入/外部平台迁移）、校验规则版本/迁移规则版本、哈希值、状态、传入/迁移时间、冻结/失效原因
模态标识信息	模态标识值、双因子码值、标识类型、关联资源信息（商品/交易）、状态、生成时间、哈希值、存证记录ID、溯源记录ID
用户信息	用户ID、角色ID、网格ID（仅网格管理员/操作员）、姓名、手机号（脱敏）、身份证号（加密）、账号状态、创建时间
审计日志	日志ID、操作人ID、操作类型、操作内容、IP地址、设备信息、操作时间、操作结果
服务订阅记录	订阅ID、客户ID、网格ID、套餐等级、服务期限、收费金额、支付状态、订阅时间、到期提醒时间
5.2 数据安全要求
•个人信息保护：严格遵循《个人信息保护法》，仅收集必要信息，明确信息使用范围，获得用户明示同意，禁止向第三方泄露
•数据访问控制：按角色权限控制数据访问范围，敏感数据（如完整身份证号）仅系统管理员可查看，需二次认证
•数据销毁：客户终止服务后，可申请销毁非归档数据，销毁过程记录日志，确保不可恢复
6. 接口需求
6.1 内部接口
系统内部模块间接口采用RESTful风格，核心接口包括：网格管理模块与码体系模块的关联接口、码生成与区块链存证的调用接口、统计模块与各业务模块的数据查询接口，确保模块间数据同步一致。
6.2 外部接口
•区块链存证接口：对接联盟链平台，实现码标识哈希值的上传与校验，接口需支持同步返回存证记录ID
•第三方支付接口：对接主流支付平台（微信支付、支付宝），支持服务订阅费的收取，接口需支持支付状态同步、退款处理
•短信验证接口：对接正规短信服务商，用于用户登录认证、订阅通知、到期提醒，接口需支持发送状态查询
•客户系统对接接口：支持与客户ERP系统、交易系统对接，实现商品信息、交易数据的同步，接口协议支持JSON/XML
•OCR识别接口：对接OCR服务平台，实现资质文件（营业执照、身份证）的识别校验，接口需支持识别结果准确性校验
7. 约束条件
7.1 合规约束
•平台开发与运营需符合《中华人民共和国个人信息保护法》《中华人民共和国数据安全法》《网络安全法》《区块链信息服务管理规定》等法律法规
•禁止设计任何“码交易”相关功能，所有码标识仅作为服务凭证，不可单独售卖、转让
•需完成必要的备案手续（如区块链信息服务备案、ICP备案），相关资质文件需在系统中归档
数据合规要求：前端传入及迁移导入的数据需经合法性校验，确保数据来源合规、无侵权风险；后台仅对传入数据进行校验、存储与管理，不干预码的生成过程
7.2 技术约束
•开发语言：后端推荐使用Java/Python，前端推荐使用Vue.js/React，数据库推荐使用MySQL/PostgreSQL，确保技术栈成熟稳定
•部署环境：支持云服务器部署（阿里云、腾讯云），兼容Linux操作系统，支持Docker容器化部署
•安全规范：遵循OWASP安全规范，开发过程中进行安全编码，定期开展安全测试
7.3 业务约束
•码标识生成后不可修改、不可删除，仅可通过状态管控实现失效/冻结
•网格注销后的数据需归档留存，不可随意销毁，留存期限不少于5年
•服务订阅费的收取需明码标价，禁止变相收取“码费”，禁止承诺码标识升值、回购等金融化回报
8. 验收标准
8.1 功能验收
所有功能模块需符合本文档3.1-3.7节的需求描述，无功能缺失、逻辑错误；角色权限严格隔离，无越权操作漏洞；前端传入数据的校验规则可正常配置，标识唯一且不可篡改；审计日志完整记录所有操作，无遗漏、篡改。
8.2 性能验收
并发量、响应时间、数据存储容量需满足4.1节的性能需求，通过压力测试验证；系统连续运行72小时无崩溃、无内存泄漏；数据备份与恢复功能正常，恢复后数据完整。
8.3 安全验收
通过安全渗透测试，无SQL注入、XSS等安全漏洞；个人信息脱敏存储符合要求，敏感数据访问控制有效；区块链存证功能正常，码标识验真准确，伪码识别有效。
8.4 合规验收
平台无“码交易”相关功能设计；《服务使用协议》《隐私保护告知书》完整规范；审计日志、合规报表可正常生成，满足监管备案要求；相关资质备案文件齐全。
9. 附则
9.1 文档变更
本文档的修改需经需求方与开发方共同确认，修改记录需归档留存，确保版本可追溯。
9.2 争议解决
因本文档产生的需求理解争议，由需求方与开发方协商解决，协商结果可作为补充条款归档。
9.3 生效日期
本文档经双方签字确认后生效，有效期至平台开发验收完成。